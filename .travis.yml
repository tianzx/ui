language: node_js
node_js:
  - "7"
cache:
  directories:
    - node_modules
install:
  - npm install
before_script:
  - echo "begin"
  - git config --global user.name "tianzx"
  - git config --global user.email "tianzx@aliyun.com"
script:
  # 生成静态文件
  - npm run build
after_script:
  # 将生成的静态文件，初始化为 git 仓库
  - cd  dist
  - git init
  - git config user.name "tianzx"
  - git config user.email "tianzx@aliyun.com"
  - git add --all
  - git commit -m "push from the travis server"
  # 推送到 ui-dist 分支
  - git push --force  "https://${GH_Token}@${GH_REF}" master:ui-dist
after_success:
  - echo "success"
env:
  global:
    - GH_REF: github.com/tianzx/ui-dist.git
#    - secure: "cDXYj938ZLjVmEgXaRNDXLTQzrU066ZjZYsMrayUzo5k/2e8u+1APItH/PL0w5hnfkh3UrVHXIiRTBIY46od/tfxFDPOwHyiK3kDFVHC+n0UEmEOiuqsYJnB7cxwq7y5Lai77ouu6ZSmGIz1Zd4oVJlPeWBBWbZifaLIukXpEM83s5S+ZTxUymGUJ4eUT1qG6XP47hPBaQhAU4QzovEfdQ+N3jZJgTPXmmDas4s6/pmPNeWajUdRoHA1vq4TsCskTqlbPV6MCxg7lq34lqAi4FN24+fpZNCSqdrOsmLJmn7beXbN2v2vJBwTMa1Oiq4s2naBpgfDVJRW69x6s5yBg5YnhQP8FuVLcS4RCBdTebrwXJ7rf5p0G91OHcOUD7MdCWYtbXt9pVpVVA9lpJIKwZwdcRNf9vV17gtMAjSh/5cG7TfFVPeMvwFoIK7zoHJBT9DtJgdOXgxUeMgenQEt1/FAnPz+CRJWE8rEvtNPb2pemy6axjVnUTPW6GQ4Yk382oOfAvVmEjqCJec65UfL3+KOlYXEyZyOY52db/3E6TjWDyCOa9ba0BU6WYwVWSiXpxDKcdY2GBh61eE4mHgF3ySFBs0AfEZI3P59QQK2aWp/sWuLyx/DWbRy7YieJqOjGsRnRI4BNFFI/A+kcRSXHVEK9XwLScISyN/H5rmWPB0="
    - secure: "TE14rQkNCSzR/+hoshD4xzgKDh69UY8juGOU2VQ/g5Mu/+yUdlrjcx/xNshHALI1KnHDY+Gcrj8Zb4Zal3ZYWAlhHgbLRggd/7Q/84CJnxsaqkPi7pfyREBdjJQ0nLr3ieGrkgcFGa+j9Z2jB6bKo+/7t/MEfkBP6WFxuXeXQND7sXfePb9Czhj3lEGF1s+4bE+j/xy6IvusMCikZ1s02za0QwBb1KzndN3mKxVr8REqb1bcKqoMnAXaZtoDoXGUbCTLfXaXm02hDjOWJs+G34F1lgUJoNEsBewDP6CA4jlsUYtpPbCCWJZxY3lDdpGbVDTEYo1eXUmnI59FcDQGrv7AC9n2SkyQuk8WfxvzGaXoZOS6AiDZSESK7ZnKxDRk38F1Lc4D8KuO+mG9SfmLVK+/GwLqtoqhqFweGs7UGyiWDfrLdlYjdY9+IG+GcKwfFlVi09aYkUgOk9n0uwQ85d+PDc23U6mW4MYjvUCrJXHYsm3fVoyV77MN7qP/a90zSCRdQxgQDXA4fDrcogXCpiVbK/beCQGsl0SXLzg6+Aj0WASN5w1fDz5wOqkwBxm2cie4gszAYhGKe7vVEre0r8rnOPeNb52mFMaeBPBB5hYQgSD5Hy1B1MuGjediMFGVnoxjIPUjNognYvFZC7zieWfRE+2zxT94ym03k1UC8Og="
